<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en"
	lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<meta name="description" content="Zeta Components - reusable set of high quality PHP components to fasten your development." />
	<meta name="keywords" content="PHP, apache, components, framework, quality" />
	<meta name="author" content="dotxp" />
	<meta name="language" content="en" />
	<meta name="date" content="Wed, 04 Aug 2010 13:07:09 +0200" />
	<meta name="robots" content="all" />

	<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<meta name="DC.title" content="Tutorial" />
	<meta name="DC.creator" content="dotxp" />
	<meta name="DC.date" content="Wed, 04 Aug 2010 13:07:09 +0200" />
	<meta name="DC.rights" content="Copyright" />

	<link rel="meta" href="/documentation/trunk/WorkflowEventLogTiein/tutorial.rdf" />
	<link rel="icon" href="/images/favicon.png" type="image/png" />

	<link rel="Stylesheet" type="text/css" href="/styles/screen.css" media="screen" />
	<link rel="Stylesheet" type="text/css" href="/styles/print.css" media="print" />


	<title>Zeta Components - high quality PHP components</title>
</head>
<body>
<div id="wcv">
	<h1>
		<a id="header-png" href="" title="Zeta Components - high quality PHP components">
			Zeta Components - high quality PHP components
		</a>
	</h1>

	<ul class="navigation">
<li >
	<a href="/news.html" title="About">About</a>
	</li>
<li >
	<a href="/community/index.html" title="Community">Community</a>
	</li>
<li class="requested">
	<a href="/documentation/overview.html" title="Documentation">Documentation</a>
	</li>
<li >
	<a href="/download/index.html" title="Download">Download</a>
	</li>
<li >
	<a href="/support.html" title="Support">Support</a>
	</li>

</ul>
<ul class="subnavigation">
<li >
	<a href="/documentation/overview.html" title="Overview">Overview</a>
	</li>
<li >
	<a href="/documentation/install.html" title="Installation">Installation</a>
	</li>

</ul>

	<div class="content">
    <ul class="tabs">
    <li class="requested">
	<a href="/documentation/trunk/WorkflowEventLogTiein/tutorial.html" title="Tutorial">Tutorial</a>
	</li>
<li >
	<a href="/documentation/trunk/WorkflowEventLogTiein/phpdoc/classtrees.html" title="API">API</a>
	</li>

</ul>

		<h2>eZ Components - WorkflowEventLogTiein</h2><div class="toc"><h3>Table of Contents</h3><ul><li><p><a href="#introduction">Introduction</a></p></li><li><p><a href="#class-overview">Class overview</a></p></li><li><p><a href="#usage">Usage</a></p><ul><li><p><a href="#log-workflow-execution-to-a-file">Log workflow execution to a file</a></p></li></ul></li></ul></div><a name="introduction"></a><a name="id1"></a><h3>Introduction</h3><p>The WorkflowEventLogTiein component allows you to log workflow execution into files or other storage spaces in different formats using the EventLog component.</p><a name="class-overview"></a><a name="id2"></a><h3>Class overview</h3><dl><dt>ezcWorkflowEventLogListener</dt><dd>Wrapper for <a href='/zetacomponents/documentation/trunk/WorkflowEventLogTiein/phpdoc/ezcLog.html'>ezcLog</a> that logs workflow events.</dd></dl><a name="usage"></a><a name="id3"></a><h3>Usage</h3><a name="log-workflow-execution-to-a-file"></a><a name="id4"></a><h4>Log workflow execution to a file</h4><p>This example shows how to log workflow execution into a file.</p><ol class="code">
<li><span style="color: #000000">&lt;?php</span></li>
<li><span style="color: #007700">//&nbsp;Set&nbsp;up&nbsp;the&nbsp;logfile&nbsp;writer.</span></li>
<li><span style="color: #000000">$writer&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/WorkflowEventLogTiein/phpdoc/ezcLogUnixFileWriter.html'>ezcLogUnixFileWriter</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'/tmp'</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #335533">'workflow.log'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #000000">$log&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/WorkflowEventLogTiein/phpdoc/ezcLog.html#getInstance'>ezcLog::getInstance</a></span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$mapper&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$log</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">getMapper</span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">$filter&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000">ezcLogFilter</span><span style="color: #0000FF">;</span></li>
<li><span style="color: #000000">$rule&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/WorkflowEventLogTiein/phpdoc/ezcLogFilterRule.html'>ezcLogFilterRule</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$filter</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">$writer</span><span style="color: #0000FF">,&nbsp;</span><span style="color: #000000">true&nbsp;</span><span style="color: #0000FF">);</span></li>
<li><span style="color: #000000">$mapper</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">appendRule</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$rule&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Set&nbsp;up&nbsp;database&nbsp;connection.</span></li>
<li><span style="color: #000000">$db&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/WorkflowEventLogTiein/phpdoc/ezcDbFactory.html#create'>ezcDbFactory::create</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'mysql://test@localhost/test'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Set&nbsp;up&nbsp;workflow&nbsp;definition&nbsp;storage&nbsp;(database).</span></li>
<li><span style="color: #000000">$definition&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/WorkflowEventLogTiein/phpdoc/ezcWorkflowDatabaseDefinitionStorage.html'>ezcWorkflowDatabaseDefinitionStorage</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$db&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Load&nbsp;latest&nbsp;version&nbsp;of&nbsp;workflow&nbsp;named&nbsp;"Test".</span></li>
<li><span style="color: #000000">$workflow&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$definition</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">loadByName</span><span style="color: #0000FF">(&nbsp;</span><span style="color: #335533">'Test'&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Set&nbsp;up&nbsp;database-based&nbsp;workflow&nbsp;executer.</span></li>
<li><span style="color: #000000">$execution&nbsp;</span><span style="color: #0000FF">=&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/WorkflowEventLogTiein/phpdoc/ezcWorkflowDatabaseExecution.html'>ezcWorkflowDatabaseExecution</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$db&nbsp;</span><span style="color: #0000FF">);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Pass&nbsp;workflow&nbsp;object&nbsp;to&nbsp;workflow&nbsp;executer.</span></li>
<li><span style="color: #000000">$execution</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">workflow&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$workflow</span><span style="color: #0000FF">;</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Attach&nbsp;logfile&nbsp;writer&nbsp;as&nbsp;a&nbsp;listener.</span></li>
<li><span style="color: #000000">$execution</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">addListener</span><span style="color: #0000FF">(&nbsp;new&nbsp;</span><span style="color: #000000"><a href='/zetacomponents/documentation/trunk/WorkflowEventLogTiein/phpdoc/ezcWorkflowEventLogListener.html'>ezcWorkflowEventLogListener</a></span><span style="color: #0000FF">(&nbsp;</span><span style="color: #000000">$log&nbsp;</span><span style="color: #0000FF">)&nbsp;);</span></li>
<li></li>
<li><span style="color: #007700">//&nbsp;Start&nbsp;workflow&nbsp;execution.</span></li>
<li><span style="color: #000000">$id&nbsp;</span><span style="color: #0000FF">=&nbsp;</span><span style="color: #000000">$execution</span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">start</span><span style="color: #0000FF">();</span></li>
<li><span style="color: #000000">?&gt;</span></li>

</ol><p>For more information on using the <a href="introduction_EventLog.html">EventLog</a> component please refer to its documentation.</p><!--Local Variables:
mode: rst
fill-column: 79
End:
vim: et syn=rst tw=79-->

	</div>

	<div class="footer">
	Copyright Â© 2010 <a href="http://apache.org">The Software Foundation</a>
</div>
</div>
</body>
</html>
