<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en"
	lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<meta name="description" content="Apache Zeta Components - reusable set of high quality PHP components to fasten your development." />
	<meta name="keywords" content="PHP, apache, components, framework, quality" />
	<meta name="author" content="dotxp" />
	<meta name="language" content="en" />
	<meta name="date" content="Wed, 04 Aug 2010 13:07:23 +0200" />
	<meta name="robots" content="all" />

	<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<meta name="DC.title" content="ezcQueryUpdate.html" />
	<meta name="DC.creator" content="dotxp" />
	<meta name="DC.date" content="Wed, 04 Aug 2010 13:07:23 +0200" />
	<meta name="DC.rights" content="Copyright" />

	<link rel="meta" href="/zetacomponents/documentation/trunk/Database/phpdoc/ezcQueryUpdate.rdf" />
	<link rel="icon" href="/zetacomponents/images/favicon.png" type="image/png" />

	<link rel="Stylesheet" type="text/css" href="/zetacomponents/styles/screen.css" media="screen" />
	<link rel="Stylesheet" type="text/css" href="/zetacomponents/styles/print.css" media="print" />


	<title>Apache Zeta Components - high quality PHP components</title>
</head>
<body>
<div id="wcv">
	<h1>
		<a id="header-png" href="/zetacomponents" title="Apache Zeta Components - high quality PHP components">
			Apache Zeta Components - high quality PHP components
		</a>
	</h1>

	<ul class="navigation">
<li >
	<a href="/zetacomponents/news.html" title="About">About</a>
	</li>
<li >
	<a href="/zetacomponents/community/index.html" title="Community">Community</a>
	</li>
<li class="requested">
	<a href="/zetacomponents/documentation/overview.html" title="Documentation">Documentation</a>
	</li>
<li >
	<a href="/zetacomponents/download/index.html" title="Download">Download</a>
	</li>
<li >
	<a href="/zetacomponents/support.html" title="Support">Support</a>
	</li>

</ul>
<ul class="subnavigation">
<li >
	<a href="/zetacomponents/documentation/overview.html" title="Overview">Overview</a>
	</li>
<li >
	<a href="/zetacomponents/documentation/install.html" title="Installation">Installation</a>
	</li>

</ul>

	<div class="content">
    <ul class="tabs">
    <li >
	<a href="/zetacomponents/documentation/trunk/Database/tutorial.html" title="Tutorial">Tutorial</a>
	</li>
<li class="requested">
	<a href="/zetacomponents/documentation/trunk/Database/phpdoc/classtrees.html" title="API">API</a>
	</li>
<li >
	<a href="/zetacomponents/documentation/trunk/Database/oracle_setup.html" title="Oracle_setup ">Oracle_setup </a>
	</li>

</ul>

		
  <div class="phpdoc">
    <h2>Apache Zeta Components Manual :: Docs For Class ezcQueryUpdate</h2>

                  <h3>Database::ezcQueryUpdate</h3>
    
<a name="sec-description"></a>
<h3>Class ezcQueryUpdate</h3>

<p>Class to create select database independent UPDATE queries.</p><div><p>ezcQueryUpdate does not support updating from via a select call.</p><p>Note that this class creates queries that are syntactically independant  of database. Semantically the queries still differ and so the same  query may produce different results on different databases. Such  differences are noted throughout the documentation of this class.</p><p>This class implements SQL92. If your database differs from the SQL92  implementation extend this class and reimplement the methods that produce  different results. Some methods implemented in ezcQuery are not defined by SQL92.  These methods are marked and ezcQuery will return MySQL syntax for these cases.</p><p>The examples show the SQL generated by this class.  Database specific implementations may produce different results.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-id"><a href="ezcDbInstance.html">ezcDbInstance</a></span><span class="src-sym">::</span><a href="ezcDbInstance.html#methodget">get</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">-&gt;</span><span class="src-id">createUpdateQuery</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><a href="ezcQueryUpdate.html#methodupdate">update</a><span class="src-sym">(&#8192;</span><span class="src-str">'legends'&#8192;</span><span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">-&gt;</span><a href="ezcQueryUpdate.html#methodset">set</a><span class="src-sym">(&#8192;</span><span class="src-str">'name'</span><span class="src-sym">,&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><a href="ezcQuery.html#methodbindValue">bindValue</a><span class="src-sym">(&#8192;</span><span class="src-str">'Gretzky'&#8192;</span><span class="src-sym">)&#8192;)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">-&gt;</span><a href="ezcQueryUpdate.html#methodset">set</a><span class="src-sym">(&#8192;</span><span class="src-str">'year'</span><span class="src-sym">,&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><a href="ezcQuery.html#methodbindValue">bindValue</a><span class="src-sym">(&#8192;</span><span class="src-num">1961&#8192;</span><span class="src-sym">)&#8192;)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$stmt&#8192;</span>=&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><a href="ezcQuery.html#methodprepare">prepare</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;<span class="src-var">$stmt</span><span class="src-sym">-&gt;</span><span class="src-id">execute</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
</ol></div>
<p>Source for this file: <a href="http://fisheye6.atlassian.com/browse/zetacomponents/trunk/Database/src/sqlabstraction/query_update.php?r=HEAD">/Database/src/sqlabstraction/query_update.php</a></p>
       


<pre><a href="ezcQuery.html">ezcQuery</a>
   |
   --ezcQueryUpdate</pre>


  <table><tr><td>
            <strong>Version:</strong>&#8192;&#8192;
          </td>
          <td>//autogentag//</td>
        </tr></table><a name="sec-var-summary"></a>
  <h3>Member Variables</h3>
  <table class="summary"><tr><td class="right">
            <em>protected</em>            <em>string</em>          </td>
          <td>
            <code>
              $whereString
               = <span class="var-default"> null</span>            </code>
            <br><div style="margin-left: 20px">Stores the WHERE part of the SQL.</div>                      </td>
        </tr></table><h3>Inherited Member Variables</h3>
  <table class="summary"><thead><tr><th colspan="2">
            From <span class="classname"><a href="ezcQuery.html">ezcQuery</a></span>         
          </th>
        </tr></thead><tbody><tr><td class="right">
              <em>protected</em>                          </td>
            <td>
              <code><a href="ezcQuery.html#var%24db">ezcQuery::$db</a></code>
              
            </td>
          </tr><tr><td class="right">
              <em>public</em>                          </td>
            <td>
              <code><a href="ezcQuery.html#var%24expr">ezcQuery::$expr</a></code>
              
            </td>
          </tr></tbody></table><a name="sec-method-summary"></a>
  <h3>Method Summary</h3>
  <table class="summary"><tr><td class="right">
            <em>public</em>                        <em>ezcQueryUpdate</em>          </td>
          <td>
            <code>
              <a href="#__construct"><b>__construct</b></a>(
                                                                                    $db
                                                    ,                   [                  $aliases
                   = array()]                               )
            </code>
            <br><div style="margin-left: 20px">Constructs a new ezcQueryUpdate that works on the database $db and with the aliases $aliases.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>string</em>          </td>
          <td>
            <code>
              <a href="#getQuery"><b>getQuery</b></a>(
               )
            </code>
            <br><div style="margin-left: 20px">Returns the query string for this query object.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcQueryUpdate.html">ezcQueryUpdate</a></em>          </td>
          <td>
            <code>
              <a href="#set"><b>set</b></a>(
                                                                                    $column
                                                    ,                                     $expression
                                                 )
            </code>
            <br><div style="margin-left: 20px">The update query will set the column $column to the value $expression.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcQueryUpdate.html">ezcQueryUpdate</a></em>          </td>
          <td>
            <code>
              <a href="#update"><b>update</b></a>(
                                                                                    $table
                                                 )
            </code>
            <br><div style="margin-left: 20px">Opens the query and sets the target table to $table.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em><a href="ezcQueryUpdate.html">ezcQueryUpdate</a></em>          </td>
          <td>
            <code>
              <a href="#where"><b>where</b></a>(
                                                                                    $...
                                                 )
            </code>
            <br><div style="margin-left: 20px">Adds a where clause with logical expressions to the query.</div>          </td>
        </tr></table><h3>Inherited Methods</h3>
  <table class="summary"><thead><tr><th colspan="2">
            From <span class="classname"><a href="ezcQuery.html">ezcQuery</a></span>
          </th>
        </tr></thead><tbody><tr><td class="right">
              <em>public</em>                                          <em>ezcQuery</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#method__construct">ezcQuery::__construct()</a></b></code>
              <br><div style="margin-left: 20px">Constructs a new ezcQuery that works on the database $db and with the aliases $aliases.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                            static              <em>array</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodarrayFlatten">ezcQuery::arrayFlatten()</a></b></code>
              <br><div style="margin-left: 20px">Returns all the elements in $array as one large single dimensional array.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>string</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodbindParam">ezcQuery::bindParam()</a></b></code>
              <br><div style="margin-left: 20px">Binds the parameter $param to the specified variable name $placeHolder..</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>string</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodbindValue">ezcQuery::bindValue()</a></b></code>
              <br><div style="margin-left: 20px">Binds the value $value to the specified variable name $placeHolder.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>void</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methoddoBind">ezcQuery::doBind()</a></b></code>
              <br><div style="margin-left: 20px">Performs binding of variables bound with bindValue and bindParam on the statement $stmt.</div>                          </td>
          </tr><tr><td class="right">
              <em>protected</em>                                          <em>string</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodgetIdentifier">ezcQuery::getIdentifier()</a></b></code>
              <br><div style="margin-left: 20px">Returns the correct identifier for the alias $alias.</div>                          </td>
          </tr><tr><td class="right">
              <em>protected</em>                                          <em>array(string)</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodgetIdentifiers">ezcQuery::getIdentifiers()</a></b></code>
              <br><div style="margin-left: 20px">Returns the correct identifiers for the aliases found in $aliases.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>              abstract                            <em>string</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodgetQuery">ezcQuery::getQuery()</a></b></code>
              <br><div style="margin-left: 20px">Returns the query string for this query object.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>bool</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodhasAliases">ezcQuery::hasAliases()</a></b></code>
              <br><div style="margin-left: 20px">Returns true if this object has aliases.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>PDOStatement</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodprepare">ezcQuery::prepare()</a></b></code>
              <br><div style="margin-left: 20px">Returns a prepared statement from this query which can be used for execution.</div>                          </td>
          </tr><tr><td class="right">
              <em>protected</em>                                          <em>void</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodresetBinds">ezcQuery::resetBinds()</a></b></code>
              <br><div style="margin-left: 20px">Resets the bound values and parameters to empty.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>void</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodsetAliases">ezcQuery::setAliases()</a></b></code>
              <br><div style="margin-left: 20px">Sets the aliases $aliases for this object.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em><a href="ezcQuerySubSelect.html">ezcQuerySubSelect</a></em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#methodsubSelect">ezcQuery::subSelect()</a></b></code>
              <br><div style="margin-left: 20px">Returns the ezcQuerySubSelect query object.</div>                          </td>
          </tr><tr><td class="right">
              <em>public</em>                                          <em>string</em>            </td>
            <td>
              <code><b><a href="ezcQuery.html#method__toString">ezcQuery::__toString()</a></b></code>
              <br><div style="margin-left: 20px">Return SQL string for query.</div>                          </td>
          </tr></tbody></table><a name="sec-methods"></a>
  <h3>Methods</h3>
  <a name="method_detail"></a>
          
      <a name="method__construct" id="__construct"><!-- --></a>

    <h4>__construct</h4>

    <div class="method-signature">
      ezcQueryUpdate
      __construct(
                                  
          $db
                            ,           [
          $aliases
           = array()]              )
    </div>

    <p>Constructs a new ezcQueryUpdate that works on the database $db and with the aliases $aliases.</p><div><p>The parameters are passed directly to ezcQuery.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$db</code></td>
              <td><em>PDO</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$aliases</code></td>
              <td><em>array(string=&gt;string)</em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Redefinition of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcQuery.html#method__construct">ezcQuery::__construct()</a></code></td>
            <td>
                              Constructs a new ezcQuery that works on the database $db and with the aliases $aliases.
                          </td>
          </tr></tbody></table><a name="methodgetQuery" id="getQuery"><!-- --></a>

    <h4>getQuery</h4>

    <div class="method-signature">
      string
      getQuery(
      )
    </div>

    <p>Returns the query string for this query object.</p>
    
          <h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcQueryInvalidException.html">ezcQueryInvalidException</a></code></td>
              <td>
                                  if no table or no values have been set.
                              </td>
            </tr></tbody></table><h5>Redefinition of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcQuery.html#methodgetQuery">ezcQuery::getQuery()</a></code></td>
            <td>
                              Returns the query string for this query object.
                          </td>
          </tr></tbody></table><a name="methodset" id="set"><!-- --></a>

    <h4>set</h4>

    <div class="method-signature">
      <a href="ezcQueryUpdate.html">ezcQueryUpdate</a>
      set(
                                  string
          $column
                            ,           string
          $expression
                        )
    </div>

    <p>The update query will set the column $column to the value $expression.</p>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$column</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$expression</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodupdate" id="update"><!-- --></a>

    <h4>update</h4>

    <div class="method-signature">
      <a href="ezcQueryUpdate.html">ezcQueryUpdate</a>
      update(
                                  string
          $table
                        )
    </div>

    <p>Opens the query and sets the target table to $table.</p><div><p>update() returns a pointer to $this.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$table</code></td>
              <td><em>string</em></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodwhere" id="where"><!-- --></a>

    <h4>where</h4>

    <div class="method-signature">
      <a href="ezcQueryUpdate.html">ezcQueryUpdate</a>
      where(
                                  string|array(string)
          $...
                        )
    </div>

    <p>Adds a where clause with logical expressions to the query.</p><div><p>where() accepts an arbitrary number of parameters. Each parameter  must contain a logical expression or an array with logical expressions.  If you specify multiple logical expression they are connected using  a logical and.  where() could be invoked several times. All provided arguments  added to the end of $whereString and form final WHERE clause of the query.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><a href="ezcQueryUpdate.html#methodupdate">update</a><span class="src-sym">(&#8192;</span><span class="src-str">'MyTable'&#8192;</span><span class="src-sym">)</span><span class="src-sym">-&gt;</span><a href="ezcQueryUpdate.html#methodwhere">where</a><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id"><a href="ezcQuery.html#var%24expr">expr</a></span><span class="src-sym">-&gt;</span><span class="src-id">eq</span><span class="src-sym">(&#8192;</span><span class="src-str">'id'</span><span class="src-sym">,&#8192;</span><span class="src-num">1&#8192;</span><span class="src-sym">)&#8192;)</span><span class="src-sym">;</span></div></li>
</ol></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$...</code></td>
              <td><em>string|array(string)</em></td>
              <td>
                                  Either a string with a logical expression name  or an array with logical expressions.
                              </td>
            </tr></tbody></table><h5>Exceptions:</h5>
      <table class="detail"><thead><tr><th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcQueryVariableParameterException.html">ezcQueryVariableParameterException</a></code></td>
              <td>
                                  if called with no parameters.
                              </td>
            </tr></tbody></table><div class="credit">
      Documentation generated by <a href="http://www.phpdoc.org">phpDocumentor 1.4.3</a>
    </div>
  </div>
  
	</div>

	<div class="footer">
	Copyright Â© 2010 <a href="http://apache.org">The Apache Software Foundation</a>
</div>
</div>
</body>
</html>
