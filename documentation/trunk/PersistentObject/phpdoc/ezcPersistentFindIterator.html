<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en"
	lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<meta name="description" content="Zeta Components - reusable set of high quality PHP components to fasten your development." />
	<meta name="keywords" content="PHP, apache, components, framework, quality" />
	<meta name="author" content="dotxp" />
	<meta name="language" content="en" />
	<meta name="date" content="Wed, 04 Aug 2010 13:07:52 +0200" />
	<meta name="robots" content="all" />

	<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
	<meta name="DC.title" content="ezcPersistentFindIterator.html" />
	<meta name="DC.creator" content="dotxp" />
	<meta name="DC.date" content="Wed, 04 Aug 2010 13:07:52 +0200" />
	<meta name="DC.rights" content="Copyright" />

	<link rel="meta" href="/documentation/trunk/PersistentObject/phpdoc/ezcPersistentFindIterator.rdf" />
	<link rel="icon" href="/images/favicon.png" type="image/png" />

	<link rel="Stylesheet" type="text/css" href="/styles/screen.css" media="screen" />
	<link rel="Stylesheet" type="text/css" href="/styles/print.css" media="print" />


	<title>Zeta Components - high quality PHP components</title>
</head>
<body>
<div id="wcv">
	<h1>
		<a id="header-png" href="" title="Zeta Components - high quality PHP components">
			Zeta Components - high quality PHP components
		</a>
	</h1>

	<ul class="navigation">
<li >
	<a href="/news.html" title="About">About</a>
	</li>
<li >
	<a href="/community/index.html" title="Community">Community</a>
	</li>
<li class="requested">
	<a href="/documentation/overview.html" title="Documentation">Documentation</a>
	</li>
<li >
	<a href="/download/index.html" title="Download">Download</a>
	</li>
<li >
	<a href="/support.html" title="Support">Support</a>
	</li>

</ul>
<ul class="subnavigation">
<li >
	<a href="/documentation/overview.html" title="Overview">Overview</a>
	</li>
<li >
	<a href="/documentation/install.html" title="Installation">Installation</a>
	</li>

</ul>

	<div class="content">
    <ul class="tabs">
    <li >
	<a href="/documentation/trunk/PersistentObject/tutorial.html" title="Tutorial">Tutorial</a>
	</li>
<li class="requested">
	<a href="/documentation/trunk/PersistentObject/phpdoc/classtrees.html" title="API">API</a>
	</li>

</ul>

		
  <div class="phpdoc">
    <h2>Zeta Components Manual :: Docs For Class ezcPersistentFindIterator</h2>

                  <h3>PersistentObject::ezcPersistentFindIterator</h3>
    
<a name="sec-description"></a>
<h3>Class ezcPersistentFindIterator</h3>

<p>This class provides functionality to iterate over a database  result set in the form of persistent objects.</p><div><p>Note: The iterator does not return only a single instance anymore, since  this has been fixed as a bug fix. A new instance is cloned for each  iteration step.</p><p>You must loop over the complete resultset of the iterator or  flush it before executing new queries.</p><p>Example:  </p><ol><li><div class="src-line">&#8192;&#8192;<span class="src-var">$q&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><span class="src-id">createFindQuery</span><span class="src-sym">(&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">where</span><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">expr</span><span class="src-sym">-&gt;</span><span class="src-id">gt</span><span class="src-sym">(&#8192;</span><span class="src-str">'age'</span><span class="src-sym">,&#8192;</span><span class="src-var">$q</span><span class="src-sym">-&gt;</span><span class="src-id">bindValue</span><span class="src-sym">(&#8192;</span><span class="src-num">15&#8192;</span><span class="src-sym">)&#8192;)&#8192;)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;<span class="src-sym">-&gt;</span><span class="src-id">orderBy</span><span class="src-sym">(&#8192;</span><span class="src-str">'name'&#8192;</span><span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;<span class="src-sym">-&gt;</span><span class="src-id">limit</span><span class="src-sym">(&#8192;</span><span class="src-num">10&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-var">$objects&#8192;</span>=&#8192;<span class="src-var">$session</span><span class="src-sym">-&gt;</span><span class="src-id">findIterator</span><span class="src-sym">(&#8192;</span><span class="src-var">$q</span><span class="src-sym">,&#8192;</span><span class="src-str">'Person'&#8192;</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;</div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-key">foreach&#8192;</span><span class="src-sym">(&#8192;</span><span class="src-var">$objects&#8192;</span><span class="src-key">as&#8192;</span><span class="src-var">$object&#8192;</span><span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-sym">{</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-key">if&#8192;</span><span class="src-sym">(&#8192;</span>...&#8192;<span class="src-sym">)</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">{</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-var">$objects</span><span class="src-sym">-&gt;</span><a href="ezcPersistentFindIterator.html#methodflush">flush</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-key">break</span><span class="src-sym">;</span></div></li>
<li><div class="src-line">&#8192;&#8192;&#8192;&#8192;&#8192;<span class="src-sym">}</span></div></li>
<li><div class="src-line">&#8192;&#8192;<span class="src-sym">}</span></div></li>
</ol></div>
<p>Source for this file: <a href="http://fisheye6.atlassian.com/browse/zetacomponents/trunk/PersistentObject/src/find_iterator.php?r=HEAD">/PersistentObject/src/find_iterator.php</a></p>
       
  <h3>Implements interfaces:</h3>
  <ul><li>Iterator (internal interface)</li>  </ul><table><tr><td>
            <strong>Version:</strong>&#8192;&#8192;
          </td>
          <td>//autogen//</td>
        </tr></table><a name="sec-descendants"></a>
  <h3>Descendants</h3>
  <table class="detail"><thead><tr><th>Child Class</th>
        <th>Description</th>
      </tr></thead><tbody><tr><td><a href="ezcPersistentIdentityFindIterator.html">ezcPersistentIdentityFindIterator</a></td>          <td>
                          Iterator class with identity mapping facilities.
                      </td>
        </tr></tbody></table><a name="sec-var-summary"></a>
  <h3>Member Variables</h3>
  <table class="summary"><tr><td class="right">
            <em>protected</em>            <em>mixed</em>          </td>
          <td>
            <code>
              $def
               = <span class="var-default"> null</span>            </code>
            <br><div style="margin-left: 20px">The definition of the persistent object type.</div>            <br><div style="margin-left: 20px"><p>$var ezcPersistentObjectDefinition</p></div>          </td>
        </tr><tr><td class="right">
            <em>protected</em>            <em>object</em>          </td>
          <td>
            <code>
              $object
               = <span class="var-default"> null</span>            </code>
            <br><div style="margin-left: 20px">Stores the current object of the iterator.</div>            <br><div style="margin-left: 20px"><p>This variable is null if there is no current object.</p></div>          </td>
        </tr></table><a name="sec-method-summary"></a>
  <h3>Method Summary</h3>
  <table class="summary"><tr><td class="right">
            <em>public</em>                        <em>ezcPersistentFindIterator</em>          </td>
          <td>
            <code>
              <a href="#__construct"><b>__construct</b></a>(
                                                                                    $stmt
                                                    ,                                     $def
                                                 )
            </code>
            <br><div style="margin-left: 20px">Initializes the iterator with the statement $stmt and the definition $def..</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>object</em>          </td>
          <td>
            <code>
              <a href="#current"><b>current</b></a>(
               )
            </code>
            <br><div style="margin-left: 20px">Returns the current object of this iterator.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#flush"><b>flush</b></a>(
               )
            </code>
            <br><div style="margin-left: 20px">Clears the results from the iterator.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>null</em>          </td>
          <td>
            <code>
              <a href="#key"><b>key</b></a>(
               )
            </code>
            <br><div style="margin-left: 20px">Returns null.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>object</em>          </td>
          <td>
            <code>
              <a href="#next"><b>next</b></a>(
               )
            </code>
            <br><div style="margin-left: 20px">Returns the next persistent object in the result set.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>void</em>          </td>
          <td>
            <code>
              <a href="#rewind"><b>rewind</b></a>(
               )
            </code>
            <br><div style="margin-left: 20px">Sets the iterator to point to the first object in the result set.</div>          </td>
        </tr><tr><td class="right">
            <em>public</em>                        <em>bool</em>          </td>
          <td>
            <code>
              <a href="#valid"><b>valid</b></a>(
               )
            </code>
            <br><div style="margin-left: 20px">Returns true if there is a current object.</div>          </td>
        </tr></table><a name="sec-methods"></a>
  <h3>Methods</h3>
  <a name="method_detail"></a>
              
      <a name="method__construct" id="__construct"><!-- --></a>

    <h4>__construct</h4>

    <div class="method-signature">
      ezcPersistentFindIterator
      __construct(
                                  
          $stmt
                            ,           <a href="ezcPersistentObjectDefinition.html">ezcPersistentObjectDefinition</a>
          $def
                        )
    </div>

    <p>Initializes the iterator with the statement $stmt and the definition $def..</p><div><p>The statement $stmt must be executed but not used to retrieve any results yet.  The iterator will return objects with they persistent object type provided by  $def.</p></div>
          <h5>Parameters:</h5>
      <table class="detail"><thead><tr><th>Name</th>
            <th>Type</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>$stmt</code></td>
              <td><em>PDOStatement</em></td>
              <td>
                              </td>
            </tr><tr><td><code>$def</code></td>
              <td><em><a href="ezcPersistentObjectDefinition.html">ezcPersistentObjectDefinition</a></em></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Redefined in descendants as:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentIdentityFindIterator.html#method__construct">ezcPersistentIdentityFindIterator::__construct()</a></code></td>
              <td>
                Initializes the iterator with the statement $stmt and the definition $def..&#8192;
              </td>
            </tr></tbody></table><a name="methodcurrent" id="current"><!-- --></a>

    <h4>current</h4>

    <div class="method-signature">
      object
      current(
      )
    </div>

    <p>Returns the current object of this iterator.</p><div><p>Returns null if there is no current object.</p></div>
    
        

    
          <h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>Iterator::current</code></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodflush" id="flush"><!-- --></a>

    <h4>flush</h4>

    <div class="method-signature">
      void
      flush(
      )
    </div>

    <p>Clears the results from the iterator.</p><div><p>This method must be called if you decide not to iterate over the complete resultset.  Failure to do so may result in errors on subsequent SQL queries.</p></div>
    
        

    
    
    
        <a name="methodkey" id="key"><!-- --></a>

    <h4>key</h4>

    <div class="method-signature">
      null
      key(
      )
    </div>

    <p>Returns null.</p><div><p>Persistent objects do not have a key. Hence, this method always returns  null.</p></div>
    
        

    
          <h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>Iterator::key</code></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodnext" id="next"><!-- --></a>

    <h4>next</h4>

    <div class="method-signature">
      object
      next(
      )
    </div>

    <p>Returns the next persistent object in the result set.</p><div><p>The next object is set to the current object of the iterator.  Returns null and sets the current object to null if there  are no more results in the result set.</p></div>
    
        

    
          <h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>Iterator::next</code></td>
              <td>
                              </td>
            </tr></tbody></table><h5>Redefined in descendants as:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code><a href="ezcPersistentIdentityFindIterator.html#methodnext">ezcPersistentIdentityFindIterator::next()</a></code></td>
              <td>
                Returns the next persistent object in the result set.&#8192;
              </td>
            </tr></tbody></table><a name="methodrewind" id="rewind"><!-- --></a>

    <h4>rewind</h4>

    <div class="method-signature">
      void
      rewind(
      )
    </div>

    <p>Sets the iterator to point to the first object in the result set.</p>
    
        

    
          <h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>Iterator::rewind</code></td>
              <td>
                              </td>
            </tr></tbody></table><a name="methodvalid" id="valid"><!-- --></a>

    <h4>valid</h4>

    <div class="method-signature">
      bool
      valid(
      )
    </div>

    <p>Returns true if there is a current object.</p>
    
        

    
          <h5>Implementation of:</h5>
      <table class="detail"><thead><tr><th>Method</th>
            <th class="desc">Description</th>
          </tr></thead><tbody><tr><td><code>Iterator::valid</code></td>
              <td>
                              </td>
            </tr></tbody></table><div class="credit">
      Documentation generated by <a href="http://www.phpdoc.org">phpDocumentor 1.4.3</a>
    </div>
  </div>
  
	</div>

	<div class="footer">
	Copyright Â© 2010 <a href="http://apache.org">The Software Foundation</a>
</div>
</div>
</body>
</html>
